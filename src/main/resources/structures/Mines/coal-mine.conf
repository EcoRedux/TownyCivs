Id: coal_mine

Name: <dark_gray><bold>COAL MINE</bold></dark_gray>

Period: 100

Material: coal
MaxCount: 2
AreaRadius: 5x6x5
SaveEachNTicks: 1

AdditionalTaxAmount: 20
TownUpkeep: 0
InventorySize: 5
TownPointPrice: 2
CustomModelData: 7
Tags: [
  "Factory"
]

Description: [
  "<dark_gray><italic>â› An Established Industrial Concern</italic></dark_gray>"
  "<gray><bold>â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”</bold></gray>"
  "<gray>Supplies coal essential for steam engines,</gray>"
  "<gray>foundries, and the machinery of modern warfare.</gray>"
  "<gray><bold>â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”</bold></gray>"
  "<gradient:#ffd700:#ffcc00><bold>âš’ UPGRADE</bold></gradient> <gradient:#ffff66:#ffeb3b>â¤ Advanced Coal Mine</gradient>"
  "<gray><bold>â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”</bold></gray>"
  "<gradient:#ffd700:#ffcc00><bold>âš™ REQUIREMENTS</bold></gradient>"
  "<gray>â€¢ <gold>Â£1000 ğŸ’°</gold> â€¢ <gold>Town Level [II] ğŸ›</gold></gray>"
  "<dark_red><bold>â€¢ Licensed Authority âš </bold></dark_red>"
]




BuyRequirements: [
  {
    Mechanic: permission
    Value: "townycivs.builds.mines.coal"
  }
  {
    Mechanic: price
    Value: 500
  }
]

Production: [
  {
    Mechanic: item_production
    Value: {
      Items: [
        {
          Material: "minecraft:coal"
          Amount: 10
        }
      ]
    }
  }
]

Upkeep: [
  {
    Mechanic: town_upkeep
    Value: 1
  }
  {
    # Pickaxe requirement - RequireAll: false means ANY ONE pickaxe works (OR logic)
    Mechanic: item_upkeep
    Value: {
      RequireAll: false
      Items: [
        {
          Material: "minecraft:wooden_pickaxe"
          Amount: 1
          ConsumeItem: false
          DamageAmount: 20
        }
        {
          Material: "minecraft:stone_pickaxe"
          Amount: 1
          ConsumeItem: false
          DamageAmount: 15
        }
        {
          Material: "minecraft:iron_pickaxe"
          Amount: 1
          ConsumeItem: false
          DamageAmount: 10
        }
        {
          Material: "minecraft:diamond_pickaxe"
          Amount: 1
          ConsumeItem: false
          DamageAmount: 5
        }
        {
          Material: "minecraft:netherite_pickaxe"
          Amount: 1
          ConsumeItem: false
          DamageAmount: 5
        }
        {
          Material: "minecraft:golden_pickaxe"
          Amount: 1
          ConsumeItem: false
          DamageAmount: 5
        }
      ]
    }
  }
]

# ===== UPGRADE SYSTEM TESTING =====
# This defines what structure this can upgrade TO
UpgradePath: "coal_mine_ii"

# These are the requirements needed to perform the upgrade
UpgradeRequirements: [
  # TEST CASE 1: Permission requirement
  {
    Mechanic: permission
    Value: "townycivs.upgrades.mines.coal"
  }
  # TEST CASE 2: Price requirement (higher cost to test balance checking)
  {
    Mechanic: price
    Value: 1000
  }
  # TEST CASE 3: Town level requirement
  {
    Mechanic: town_level
    Value: 2
  }
  {
      Mechanic: structure
      Value: "wheat_farm"
  }
]

# Edge cases to test:
# 1. Player without permission - should show red X
# 2. Town without enough money - should show red X
# 3. Town level too low - should show red X
# 4. All requirements met - should show green checkmarks
# 5. Partial requirements met - should show mixed indicators
# 6. No upgrade path defined - button should not appear
# 7. Empty upgrade requirements - should allow upgrade freely
# 8. Null upgrade requirements - should allow upgrade freely

Blocks: {
  "tc:planks": 150,
  "tc:stairs": 100
  "minecraft:cobblestone": 60
  "minecraft:coal_block": 25
  "minecraft:bricks": 15
  "tc:fence": 10
  "tc:door": 4
  "minecraft:glass": 2
  "minecraft:chest": 1
  "minecraft:blast_furnace": 1
}

